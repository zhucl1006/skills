# [功能名称] 设计与实施计划

> **给 Claude:** 必需的子技能：使用 project-workflow 逐任务实施此计划。

**创建时间:** YYYY-MM-DD
**状态:** 草稿 / 已批准 / 进行中 / 已完成
**负责人:** [负责人名称]

**目标:** [一句话描述要构建什么]

**架构方案:** [2-3 句话描述实现方法]

**技术栈:** [关键技术/库]

---

## 📊 整体进度

- [ ] 第一部分：设计阶段（复杂功能需要）
- [ ] 第二部分：实施任务（所有功能都需要）
- [ ] 第三部分：集成测试
- [ ] 第四部分：文档更新
- [ ] 第五部分：最终验证

**完成度:** 0/5 (0%)

---

## 第一部分：设计阶段（复杂功能需要，简单功能可省略）

### 1.1 功能概述

[功能的详细描述和目标]

**设计完成状态:**
- [ ] 需求分析完成
- [ ] 架构设计完成
- [ ] 组件设计完成
- [ ] 数据流设计完成
- [ ] 错误处理设计完成
- [ ] 测试策略制定完成

---

### 1.2 需求分析

#### 功能性需求

- [ ] 需求 1: [具体描述]
- [ ] 需求 2: [具体描述]
- [ ] 需求 3: [具体描述]

#### 非功能性需求

- [ ] 性能要求: [具体指标，如响应时间 < 100ms]
- [ ] 安全要求: [具体要求，如数据加密、权限控制]
- [ ] 可扩展性: [具体要求，如支持横向扩展]
- [ ] 可维护性: [具体要求，如代码覆盖率 > 80%]

---

### 1.3 架构设计

#### 选定方案

[详细描述选择的技术方案和实现路径]

**选择此方案的原因:**
- 原因 1: [具体说明]
- 原因 2: [具体说明]
- 原因 3: [具体说明]

#### 备选方案对比

**方案 A:**
- 优点: [列举优点]
- 缺点: [列举缺点]
- 未选择原因: [说明为什么不选]

**方案 B:**
- 优点: [列举优点]
- 缺点: [列举缺点]
- 未选择原因: [说明为什么不选]

---

### 1.4 组件设计

#### 组件 1: [组件名称]

**职责:** [清晰描述组件的职责]

**接口定义:**
```typescript
// 示例接口定义
interface ComponentInterface {
  method1(param: Type): ReturnType;
  method2(param: Type): ReturnType;
}
```

**依赖关系:**
- 依赖 1: [说明依赖的组件或库]
- 依赖 2: [说明依赖的组件或库]

**状态:**
- [ ] 接口设计完成
- [ ] 依赖关系明确
- [ ] 实现计划制定

#### 组件 2: [组件名称]

[同上结构]

---

### 1.5 数据流设计

```
[数据流图或详细描述]

用户输入 → 组件 A → 组件 B → 数据库
        ← 响应   ← 处理   ← 结果
```

**关键数据流:**
1. 流程 1: [描述数据如何流转]
2. 流程 2: [描述数据如何流转]

**状态:**
- [ ] 主要数据流设计完成
- [ ] 异常数据流设计完成
- [ ] 数据验证规则明确

---

### 1.6 错误处理策略

#### 错误场景 1: [场景名称]

- **触发条件:** [什么情况下会发生]
- **检测方式:** [如何检测到这个错误]
- **处理策略:** [如何处理这个错误]
- **用户反馈:** [向用户展示什么信息]
- **状态:** [ ] 已设计

#### 错误场景 2: [场景名称]

[同上结构]

---

### 1.7 测试策略

#### 单元测试计划

- [ ] 测试组件 A 的核心功能
- [ ] 测试组件 B 的核心功能
- [ ] 测试错误处理逻辑
- [ ] 测试边界条件

#### 集成测试计划

- [ ] 测试组件间的数据流
- [ ] 测试组件间的交互
- [ ] 测试完整业务流程

#### 端到端测试计划

- [ ] 测试完整用户工作流
- [ ] 测试关键用户场景

---

## 第二部分：实施任务（所有功能都需要）

### 2.1 前置准备

- [ ] 设计文档已批准（如适用）
- [ ] 依赖项已安装
- [ ] 开发环境已配置
- [ ] 测试框架已配置
- [ ] Git 分支已创建

**准备工作完成度:** 0/5 (0%)

---

### 任务 1: [组件/功能名称]

**优先级:** 高 / 中 / 低
**预计复杂度:** 简单 / 中等 / 复杂
**状态:** 待开始 / 进行中 / 已完成

**涉及文件:**
- 创建: `exact/path/to/file.py`
- 修改: `exact/path/to/existing.py:123-145`
- 测试: `tests/exact/path/to/test.py`

#### 步骤 1: 编写失败的测试

- [ ] 测试代码已编写

```python
def test_specific_behavior():
    """测试 [具体行为] 是否正常工作。"""
    # 准备
    input_data = "测试输入"

    # 执行
    result = function(input_data)

    # 断言
    assert result == "期望输出"
```

#### 步骤 2: 运行测试验证失败

- [ ] 测试运行确认失败

**运行命令:**
```bash
pytest tests/path/test.py::test_specific_behavior -v
```

**预期输出:**
```
FAILED tests/path/test.py::test_specific_behavior
NameError: name 'function' is not defined
```

#### 步骤 3: 编写最小实现

- [ ] 实现代码已编写

```python
def function(input_data):
    """[函数功能描述]。"""
    # 最小实现以通过测试
    return "期望输出"
```

#### 步骤 4: 运行测试验证通过

- [ ] 测试运行确认通过

**运行命令:**
```bash
pytest tests/path/test.py::test_specific_behavior -v
```

**预期输出:**
```
PASSED tests/path/test.py::test_specific_behavior
```

#### 步骤 5: 提交代码

- [ ] 代码已提交

```bash
git add tests/path/test.py src/path/file.py
git commit -m "feat: 添加 [具体功能]"
```

**任务 1 完成状态:** 0/5 步骤完成

---

### 任务 2: [组件/功能名称]

**优先级:** 高 / 中 / 低
**预计复杂度:** 简单 / 中等 / 复杂
**状态:** 待开始 / 进行中 / 已完成

[同上结构，包含 5 个步骤的完整 TDD 流程]

---

### 任务 3: [组件/功能名称]

[同上结构]

---

## 第三部分：集成测试

### 集成测试 1: [测试场景名称]

**状态:** [ ] 待开始 / [ ] 进行中 / [ ] 已完成

**涉及文件:**
- 测试文件: `tests/integration/test_integration.py`

**测试代码:**
```python
def test_integration_scenario():
    """测试组件间的协作是否正常。"""
    # 测试实现
    pass
```

**执行步骤:**
- [ ] 测试代码已编写
- [ ] 测试已运行
- [ ] 测试已通过

**运行命令:**
```bash
pytest tests/integration/test_integration.py -v
```

---

### 集成测试 2: [测试场景名称]

[同上结构]

---

## 第四部分：文档更新

### 文档更新 1: [文档名称]

**状态:** [ ] 待开始 / [ ] 进行中 / [ ] 已完成

**文件路径:** `docs/path/to/document.md`

**更新内容:**
- [ ] 添加新功能说明章节
- [ ] 更新 API 文档
- [ ] 添加使用示例
- [ ] 更新变更日志

---

### 文档更新 2: [文档名称]

[同上结构]

---

## 第五部分：最终验证

### 验证清单

- [ ] 所有单元测试通过
- [ ] 所有集成测试通过
- [ ] 代码符合项目规范（参考 AGENTS.md）
- [ ] 文档已更新
- [ ] 无安全漏洞
- [ ] 性能指标达标
- [ ] 错误处理完整
- [ ] 代码已审查

**验证完成度:** 0/8 (0%)

---

### 运行完整测试套件

- [ ] 测试套件已运行
- [ ] 所有测试通过

```bash
pytest tests/ -v --cov=src --cov-report=term-missing
```

---

### 运行代码检查

- [ ] 代码检查已运行
- [ ] 无警告或错误

```bash
# Python 示例
flake8 src/
pylint src/
black src/ --check
mypy src/

# JavaScript 示例
eslint src/
prettier src/ --check
```

---

## 📋 执行记录

| 日期 | 任务 | 状态 | 备注 |
|------|------|------|------|
| YYYY-MM-DD | 任务 1 | ✅ 已完成 | [备注信息] |
| YYYY-MM-DD | 任务 2 | ✅ 已完成 | [备注信息] |
| YYYY-MM-DD | 任务 3 | ⏳ 进行中 | [备注信息] |
| YYYY-MM-DD | 任务 4 | ⏸️ 暂停 | [备注信息] |
| YYYY-MM-DD | 任务 5 | 📋 待开始 | [备注信息] |

**状态图例:**
- ✅ 已完成
- ⏳ 进行中
- ⏸️ 暂停
- 📋 待开始
- ❌ 已取消
- ⚠️ 有问题

---

## 📝 项目笔记

### 技术决策

- [ ] 决策 1: [决策内容和理由]
- [ ] 决策 2: [决策内容和理由]

### 遇到的问题

- [ ] 问题 1: [问题描述]
  - **解决方案:** [如何解决的]
  - **经验教训:** [学到了什么]

- [ ] 问题 2: [问题描述]
  - **解决方案:** [如何解决的]
  - **经验教训:** [学到了什么]

### 未来改进

- [ ] 改进 1: [改进内容和优先级]
- [ ] 改进 2: [改进内容和优先级]

### 待解决问题

- [ ] 问题 1: [需要解决的问题]
- [ ] 问题 2: [需要解决的问题]

---

## 🎯 项目总结

**完成时间:** YYYY-MM-DD
**总耗时:** [实际耗时]

### 成果

- [列出主要成果]
- [列出主要成果]

### 经验总结

- [总结经验教训]
- [总结经验教训]

### 后续行动

- [ ] 行动 1: [具体行动]
- [ ] 行动 2: [具体行动]

